{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/advising-dashboard-next/src/lib/db/schema.ts"],"sourcesContent":["import { pgTable, text, integer, timestamp, boolean, json, uuid, varchar } from 'drizzle-orm/pg-core';\nimport { relations } from 'drizzle-orm';\n\nexport const users = pgTable('users', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  email: varchar('email', { length: 255 }).notNull().unique(),\n  name: varchar('name', { length: 255 }).notNull(),\n  role: varchar('role', { length: 50 }).notNull().default('student'),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n});\n\nexport const majors = pgTable('majors', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  code: varchar('code', { length: 50 }).notNull().unique(),\n  name: varchar('name', { length: 255 }).notNull(),\n  description: text('description'),\n  isActive: boolean('is_active').default(true).notNull(),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n});\n\nexport const advisorMajors = pgTable('advisor_majors', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  userId: uuid('user_id').notNull().references(() => users.id, { onDelete: 'cascade' }),\n  majorId: uuid('major_id').notNull().references(() => majors.id, { onDelete: 'cascade' }),\n});\n\nexport const courses = pgTable('courses', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  majorId: uuid('major_id').notNull().references(() => majors.id, { onDelete: 'cascade' }),\n  code: varchar('code', { length: 50 }).notNull(),\n  name: varchar('name', { length: 255 }).notNull(),\n  credits: integer('credits').notNull().default(3),\n  type: varchar('type', { length: 50 }).notNull().default('required'),\n  semester: integer('semester'),\n  offered: boolean('offered').default(true).notNull(),\n  prerequisites: json('prerequisites').$type<string[]>().default([]),\n  corequisites: json('corequisites').$type<string[]>().default([]),\n  concurrent: json('concurrent').$type<string[]>().default([]),\n  standingRequired: varchar('standing_required', { length: 50 }),\n  description: text('description'),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n});\n\nexport const students = pgTable('students', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  studentId: varchar('student_id', { length: 50 }).notNull(),\n  majorId: uuid('major_id').notNull().references(() => majors.id, { onDelete: 'cascade' }),\n  userId: uuid('user_id').references(() => users.id),\n  name: varchar('name', { length: 255 }).notNull(),\n  email: varchar('email', { length: 255 }),\n  standing: varchar('standing', { length: 50 }),\n  creditsCompleted: integer('credits_completed').default(0),\n  creditsRegistered: integer('credits_registered').default(0),\n  creditsRemaining: integer('credits_remaining').default(0),\n  courseStatuses: json('course_statuses').$type<Record<string, string>>().default({}),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n});\n\nexport const advisingPeriods = pgTable('advising_periods', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  majorId: uuid('major_id').notNull().references(() => majors.id, { onDelete: 'cascade' }),\n  semester: varchar('semester', { length: 20 }).notNull(),\n  year: integer('year').notNull(),\n  advisorName: varchar('advisor_name', { length: 255 }),\n  isActive: boolean('is_active').default(true).notNull(),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n});\n\nexport const advisingSessions = pgTable('advising_sessions', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  periodId: uuid('period_id').notNull().references(() => advisingPeriods.id, { onDelete: 'cascade' }),\n  studentId: uuid('student_id').notNull().references(() => students.id, { onDelete: 'cascade' }),\n  advisorId: uuid('advisor_id').references(() => users.id),\n  advisedCourses: json('advised_courses').$type<string[]>().default([]),\n  optionalCourses: json('optional_courses').$type<string[]>().default([]),\n  repeatCourses: json('repeat_courses').$type<string[]>().default([]),\n  bypasses: json('bypasses').$type<Record<string, { note: string; advisor: string }>>().default({}),\n  note: text('note'),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n});\n\nexport const usersRelations = relations(users, ({ many }) => ({\n  advisorMajors: many(advisorMajors),\n  advisingSessions: many(advisingSessions),\n}));\n\nexport const majorsRelations = relations(majors, ({ many }) => ({\n  courses: many(courses),\n  students: many(students),\n  advisorMajors: many(advisorMajors),\n  advisingPeriods: many(advisingPeriods),\n}));\n\nexport const coursesRelations = relations(courses, ({ one }) => ({\n  major: one(majors, {\n    fields: [courses.majorId],\n    references: [majors.id],\n  }),\n}));\n\nexport const studentsRelations = relations(students, ({ one, many }) => ({\n  major: one(majors, {\n    fields: [students.majorId],\n    references: [majors.id],\n  }),\n  user: one(users, {\n    fields: [students.userId],\n    references: [users.id],\n  }),\n  advisingSessions: many(advisingSessions),\n}));\n\nexport const advisingSessionsRelations = relations(advisingSessions, ({ one }) => ({\n  period: one(advisingPeriods, {\n    fields: [advisingSessions.periodId],\n    references: [advisingPeriods.id],\n  }),\n  student: one(students, {\n    fields: [advisingSessions.studentId],\n    references: [students.id],\n  }),\n  advisor: one(users, {\n    fields: [advisingSessions.advisorId],\n    references: [users.id],\n  }),\n}));\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/advising-dashboard-next/src/lib/db/index.ts"],"sourcesContent":["import { drizzle } from 'drizzle-orm/postgres-js';\nimport postgres from 'postgres';\nimport * as schema from './schema';\n\nconst connectionString = process.env.DATABASE_URL!;\n\nconst client = postgres(connectionString);\nexport const db = drizzle(client, { schema });\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,mBAAmB,QAAQ,GAAG,CAAC,YAAY;AAEjD,MAAM,SAAS,IAAA,qJAAQ,EAAC;AACjB,MAAM,KAAK,IAAA,uKAAO,EAAC,QAAQ;IAAE,QAAA;AAAO"}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/advising-dashboard-next/src/app/api/majors/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { db } from '@/lib/db';\nimport { majors } from '@/lib/db/schema';\nimport { eq } from 'drizzle-orm';\n\nexport async function GET() {\n  try {\n    const result = await db.select().from(majors);\n    return NextResponse.json(result);\n  } catch (error) {\n    console.error('Error fetching majors:', error);\n    return NextResponse.json({ error: 'Failed to fetch majors' }, { status: 500 });\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    \n    const { code, name, description, isActive } = body;\n    \n    if (!code || !name) {\n      return NextResponse.json({ error: 'code and name are required' }, { status: 400 });\n    }\n    \n    const result = await db.insert(majors).values({\n      code,\n      name,\n      description: description || null,\n      isActive: isActive !== false,\n    }).returning();\n    \n    return NextResponse.json(result[0], { status: 201 });\n  } catch (error) {\n    console.error('Error creating major:', error);\n    return NextResponse.json({ error: 'Failed to create major' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,MAAM,iIAAE,CAAC,MAAM,GAAG,IAAI,CAAC,sIAAM;QAC5C,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,GAAG;QAE9C,IAAI,CAAC,QAAQ,CAAC,MAAM;YAClB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA6B,GAAG;gBAAE,QAAQ;YAAI;QAClF;QAEA,MAAM,SAAS,MAAM,iIAAE,CAAC,MAAM,CAAC,sIAAM,EAAE,MAAM,CAAC;YAC5C;YACA;YACA,aAAa,eAAe;YAC5B,UAAU,aAAa;QACzB,GAAG,SAAS;QAEZ,OAAO,gJAAY,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE;YAAE,QAAQ;QAAI;IACpD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACF"}}]
}