{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/advising-dashboard-next/src/lib/auth/context.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, ReactNode, useEffect, useCallback } from 'react';\n\nexport type UserRole = 'admin' | 'advisor' | 'student';\n\nexport interface User {\n  id: string;\n  name: string;\n  email: string;\n  role: UserRole;\n}\n\nexport interface Major {\n  id: string;\n  code: string;\n  name: string;\n  description?: string | null;\n  isActive: boolean;\n  courseCount?: number;\n  studentCount?: number;\n}\n\nexport interface AuthContextType {\n  user: User | null;\n  currentRole: UserRole;\n  currentMajor: string | null;\n  currentMajorId: string | null;\n  currentStudentId: string | null;\n  majors: Major[];\n  majorsLoading: boolean;\n  majorVersion: number;\n  setCurrentRole: (role: UserRole) => void;\n  setCurrentMajor: (majorCode: string | null) => void;\n  setCurrentStudentId: (studentId: string | null) => void;\n  login: (role: UserRole, name: string) => void;\n  logout: () => void;\n  refreshMajors: () => Promise<void>;\n  isAdmin: boolean;\n  isAdvisor: boolean;\n  isStudent: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [currentRole, setCurrentRole] = useState<UserRole>('admin');\n  const [currentMajor, setCurrentMajor] = useState<string | null>(null);\n  const [currentStudentId, setCurrentStudentId] = useState<string | null>(null);\n  const [majors, setMajors] = useState<Major[]>([]);\n  const [majorsLoading, setMajorsLoading] = useState(true);\n  const [majorVersion, setMajorVersion] = useState(0);\n\n  const fetchMajors = useCallback(async () => {\n    try {\n      setMajorsLoading(true);\n      const res = await fetch('/api/majors');\n      if (res.ok) {\n        const data = await res.json();\n        setMajors(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch majors:', error);\n    } finally {\n      setMajorsLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    const savedUser = localStorage.getItem('advisingUser');\n    const savedRole = localStorage.getItem('advisingRole') as UserRole | null;\n    const savedMajor = localStorage.getItem('advisingMajor');\n    const savedStudentId = localStorage.getItem('advisingStudentId');\n    \n    if (savedUser) {\n      setUser(JSON.parse(savedUser));\n    }\n    if (savedRole) {\n      setCurrentRole(savedRole);\n    }\n    if (savedMajor) {\n      setCurrentMajor(savedMajor);\n    }\n    if (savedStudentId) {\n      setCurrentStudentId(savedStudentId);\n    }\n    \n    fetchMajors();\n  }, [fetchMajors]);\n\n  const currentMajorId = majors.find(m => m.code === currentMajor)?.id || null;\n\n  const login = (role: UserRole, name: string) => {\n    const newUser: User = {\n      id: crypto.randomUUID(),\n      name,\n      email: `${name.toLowerCase().replace(/\\s+/g, '.')}@university.edu`,\n      role,\n    };\n    setUser(newUser);\n    setCurrentRole(role);\n    localStorage.setItem('advisingUser', JSON.stringify(newUser));\n    localStorage.setItem('advisingRole', role);\n  };\n\n  const logout = () => {\n    setUser(null);\n    setCurrentRole('admin');\n    setCurrentMajor(null);\n    setCurrentStudentId(null);\n    localStorage.removeItem('advisingUser');\n    localStorage.removeItem('advisingRole');\n    localStorage.removeItem('advisingMajor');\n    localStorage.removeItem('advisingStudentId');\n  };\n\n  const handleSetCurrentRole = (role: UserRole) => {\n    setCurrentRole(role);\n    localStorage.setItem('advisingRole', role);\n  };\n\n  const handleSetCurrentMajor = (majorCode: string | null) => {\n    setCurrentMajor(majorCode);\n    setMajorVersion(v => v + 1);\n    if (majorCode) {\n      localStorage.setItem('advisingMajor', majorCode);\n    } else {\n      localStorage.removeItem('advisingMajor');\n    }\n  };\n\n  const handleSetCurrentStudentId = (studentId: string | null) => {\n    setCurrentStudentId(studentId);\n    if (studentId) {\n      localStorage.setItem('advisingStudentId', studentId);\n    } else {\n      localStorage.removeItem('advisingStudentId');\n    }\n  };\n\n  const refreshMajors = async () => {\n    await fetchMajors();\n    setMajorVersion(v => v + 1);\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        currentRole,\n        currentMajor,\n        currentMajorId,\n        currentStudentId,\n        majors,\n        majorsLoading,\n        majorVersion,\n        setCurrentRole: handleSetCurrentRole,\n        setCurrentMajor: handleSetCurrentMajor,\n        setCurrentStudentId: handleSetCurrentStudentId,\n        login,\n        logout,\n        refreshMajors,\n        isAdmin: currentRole === 'admin',\n        isAdvisor: currentRole === 'advisor',\n        isStudent: currentRole === 'student',\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/advising-dashboard-next/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/advising-dashboard-next/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,oJACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/advising-dashboard-next/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,oJACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}